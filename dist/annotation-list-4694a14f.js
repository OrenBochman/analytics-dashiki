define("text!components/annotation-list/annotation-list.html",[],function(){return'<!-- ko if: annotations && annotations() && annotations().length -->\n	<span class="annotation-list-title">Notes</span>\n	<!-- ko foreach: annotations -->\n	<div class="ui small label annotation" data-bind="text: $data.dateRange, popup: $data.htmlNote"></div>\n	<!-- /ko -->\n<!-- /ko -->\n'}),define("annotationsApi",["mediawiki-storage","moment","logger"],function(t,e){function n(){}return n.prototype.get=function(e,n,r){if("object"!=typeof e)throw new TypeError("function must receive an object");var i=e.annotations,o=$.Deferred(),s=this;return this._checkParams(i)?t.get({host:i.host,pageName:i.pageName}).fail(o.reject).done(function(t){s._checkAnnotations(t,o,i)}):o.resolve([]),o.done(n),o.fail(r),o.promise()},n.prototype._checkParams=function(t){return"object"==typeof t&&"string"==typeof t.host&&"string"==typeof t.pageName},n.prototype._checkDate=function(t){return void 0===t||"string"==typeof t&&e(t).isValid()},n.prototype._checkInterval=function(t,n){return void 0===t||void 0===n||e(t)<=e(n)},n.prototype._checkAnnotations=function(t,e,n){if(t instanceof Array){var r=this,i=t.filter(function(t){return"object"==typeof t&&r._checkDate(t.start)&&r._checkDate(t.end)&&r._checkInterval(t.start,t.end)&&"string"==typeof t.note});e.resolve(i)}else{var o='Mediawiki page with host "'+n.host+'" and page name "'+n.pageName+'" does not contain an array of annotations.';logger.error(o),e.reject(new TypeError(o))}},new n}),function(){function t(t){this.tokens=[],this.tokens.links={},this.options=t||u.defaults,this.rules=p.normal,this.options.gfm&&(this.rules=this.options.tables?p.tables:p.gfm)}function e(t,e){if(this.options=e||u.defaults,this.links=t,this.rules=h.normal,this.renderer=this.options.renderer||new n,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.rules=this.options.breaks?h.breaks:h.gfm:this.options.pedantic&&(this.rules=h.pedantic)}function n(t){this.options=t||{}}function r(t){this.tokens=[],this.token=null,this.options=t||u.defaults,this.options.renderer=this.options.renderer||new n,this.renderer=this.options.renderer,this.renderer.options=this.options}function i(t,e){return t.replace(e?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function o(t){return t.replace(/&([#\w]+);/g,function(t,e){return e=e.toLowerCase(),"colon"===e?":":"#"===e.charAt(0)?String.fromCharCode("x"===e.charAt(1)?parseInt(e.substring(2),16):+e.substring(1)):""})}function s(t,e){return t=t.source,e=e||"",function n(r,i){return r?(i=i.source||i,i=i.replace(/(^|[^\[])\^/g,"$1"),t=t.replace(r,i),n):new RegExp(t,e)}}function a(){}function l(t){for(var e,n,r=1;r<arguments.length;r++){e=arguments[r];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}function u(e,n,o){if(o||"function"==typeof n){o||(o=n,n=null),n=l({},u.defaults,n||{});var s,a,p=n.highlight,h=0;try{s=t.lex(e,n)}catch(c){return o(c)}a=s.length;var f=function(){var t,e;try{t=r.parse(s,n)}catch(i){e=i}return n.highlight=p,e?o(e):o(null,t)};if(!p||p.length<3)return f();if(delete n.highlight,!a)return f();for(;h<s.length;h++)!function(t){return"code"!==t.type?--a||f():p(t.text,t.lang,function(e,n){return null==n||n===t.text?--a||f():(t.text=n,t.escaped=!0,void(--a||f()))})}(s[h])}else try{return n&&(n=l({},u.defaults,n)),r.parse(t.lex(e,n),n)}catch(c){if(c.message+="\nPlease report this to https://github.com/chjj/marked.",(n||u.defaults).silent)return"<p>An error occured:</p><pre>"+i(c.message+"",!0)+"</pre>";throw c}}var p={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:a,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:a,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:a,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};p.bullet=/(?:[*+-]|\d+\.)/,p.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,p.item=s(p.item,"gm")(/bull/g,p.bullet)(),p.list=s(p.list)(/bull/g,p.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+p.def.source+")")(),p.blockquote=s(p.blockquote)("def",p.def)(),p._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",p.html=s(p.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,p._tag)(),p.paragraph=s(p.paragraph)("hr",p.hr)("heading",p.heading)("lheading",p.lheading)("blockquote",p.blockquote)("tag","<"+p._tag)("def",p.def)(),p.normal=l({},p),p.gfm=l({},p.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),p.gfm.paragraph=s(p.paragraph)("(?!","(?!"+p.gfm.fences.source.replace("\\1","\\2")+"|"+p.list.source.replace("\\1","\\3")+"|")(),p.tables=l({},p.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=p,t.lex=function(e,n){var r=new t(n);return r.lex(e)},t.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},t.prototype.token=function(t,e,n){for(var r,i,o,s,a,l,u,h,c,t=t.replace(/^ +$/gm,"");t;)if((o=this.rules.newline.exec(t))&&(t=t.substring(o[0].length),o[0].length>1&&this.tokens.push({type:"space"})),o=this.rules.code.exec(t))t=t.substring(o[0].length),o=o[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?o:o.replace(/\n+$/,"")});else if(o=this.rules.fences.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"code",lang:o[2],text:o[3]});else if(o=this.rules.heading.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"heading",depth:o[1].length,text:o[2]});else if(e&&(o=this.rules.nptable.exec(t))){for(t=t.substring(o[0].length),l={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/\n$/,"").split("\n")},h=0;h<l.align.length;h++)l.align[h]=/^ *-+: *$/.test(l.align[h])?"right":/^ *:-+: *$/.test(l.align[h])?"center":/^ *:-+ *$/.test(l.align[h])?"left":null;for(h=0;h<l.cells.length;h++)l.cells[h]=l.cells[h].split(/ *\| */);this.tokens.push(l)}else if(o=this.rules.lheading.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"heading",depth:"="===o[2]?1:2,text:o[1]});else if(o=this.rules.hr.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"hr"});else if(o=this.rules.blockquote.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"blockquote_start"}),o=o[0].replace(/^ *> ?/gm,""),this.token(o,e,!0),this.tokens.push({type:"blockquote_end"});else if(o=this.rules.list.exec(t)){for(t=t.substring(o[0].length),s=o[2],this.tokens.push({type:"list_start",ordered:s.length>1}),o=o[0].match(this.rules.item),r=!1,c=o.length,h=0;c>h;h++)l=o[h],u=l.length,l=l.replace(/^ *([*+-]|\d+\.) +/,""),~l.indexOf("\n ")&&(u-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+u+"}","gm"),"")),this.options.smartLists&&h!==c-1&&(a=p.bullet.exec(o[h+1])[0],s===a||s.length>1&&a.length>1||(t=o.slice(h+1).join("\n")+t,h=c-1)),i=r||/\n\n(?!\s*$)/.test(l),h!==c-1&&(r="\n"===l.charAt(l.length-1),i||(i=r)),this.tokens.push({type:i?"loose_item_start":"list_item_start"}),this.token(l,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(o=this.rules.html.exec(t))t=t.substring(o[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===o[1]||"script"===o[1]||"style"===o[1],text:o[0]});else if(!n&&e&&(o=this.rules.def.exec(t)))t=t.substring(o[0].length),this.tokens.links[o[1].toLowerCase()]={href:o[2],title:o[3]};else if(e&&(o=this.rules.table.exec(t))){for(t=t.substring(o[0].length),l={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/(?: *\| *)?\n$/,"").split("\n")},h=0;h<l.align.length;h++)l.align[h]=/^ *-+: *$/.test(l.align[h])?"right":/^ *:-+: *$/.test(l.align[h])?"center":/^ *:-+ *$/.test(l.align[h])?"left":null;for(h=0;h<l.cells.length;h++)l.cells[h]=l.cells[h].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(l)}else if(e&&(o=this.rules.paragraph.exec(t)))t=t.substring(o[0].length),this.tokens.push({type:"paragraph",text:"\n"===o[1].charAt(o[1].length-1)?o[1].slice(0,-1):o[1]});else if(o=this.rules.text.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"text",text:o[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var h={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:a,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:a,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};h._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,h._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,h.link=s(h.link)("inside",h._inside)("href",h._href)(),h.reflink=s(h.reflink)("inside",h._inside)(),h.normal=l({},h),h.pedantic=l({},h.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),h.gfm=l({},h.normal,{escape:s(h.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:s(h.text)("]|","~]|")("|","|https?://|")()}),h.breaks=l({},h.gfm,{br:s(h.br)("{2,}","*")(),text:s(h.gfm.text)("{2,}","*")()}),e.rules=h,e.output=function(t,n,r){var i=new e(n,r);return i.output(t)},e.prototype.output=function(t){for(var e,n,r,o,s="";t;)if(o=this.rules.escape.exec(t))t=t.substring(o[0].length),s+=o[1];else if(o=this.rules.autolink.exec(t))t=t.substring(o[0].length),"@"===o[2]?(n=this.mangle(":"===o[1].charAt(6)?o[1].substring(7):o[1]),r=this.mangle("mailto:")+n):(n=i(o[1]),r=n),s+=this.renderer.link(r,null,n);else if(this.inLink||!(o=this.rules.url.exec(t))){if(o=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(o[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(o[0])&&(this.inLink=!1),t=t.substring(o[0].length),s+=this.options.sanitize?i(o[0]):o[0];else if(o=this.rules.link.exec(t))t=t.substring(o[0].length),this.inLink=!0,s+=this.outputLink(o,{href:o[2],title:o[3]}),this.inLink=!1;else if((o=this.rules.reflink.exec(t))||(o=this.rules.nolink.exec(t))){if(t=t.substring(o[0].length),e=(o[2]||o[1]).replace(/\s+/g," "),e=this.links[e.toLowerCase()],!e||!e.href){s+=o[0].charAt(0),t=o[0].substring(1)+t;continue}this.inLink=!0,s+=this.outputLink(o,e),this.inLink=!1}else if(o=this.rules.strong.exec(t))t=t.substring(o[0].length),s+=this.renderer.strong(this.output(o[2]||o[1]));else if(o=this.rules.em.exec(t))t=t.substring(o[0].length),s+=this.renderer.em(this.output(o[2]||o[1]));else if(o=this.rules.code.exec(t))t=t.substring(o[0].length),s+=this.renderer.codespan(i(o[2],!0));else if(o=this.rules.br.exec(t))t=t.substring(o[0].length),s+=this.renderer.br();else if(o=this.rules.del.exec(t))t=t.substring(o[0].length),s+=this.renderer.del(this.output(o[1]));else if(o=this.rules.text.exec(t))t=t.substring(o[0].length),s+=i(this.smartypants(o[0]));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else t=t.substring(o[0].length),n=i(o[1]),r=n,s+=this.renderer.link(r,null,n);return s},e.prototype.outputLink=function(t,e){var n=i(e.href),r=e.title?i(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(n,r,this.output(t[1])):this.renderer.image(n,r,i(t[1]))},e.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/--/g,"—").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):t},e.prototype.mangle=function(t){for(var e,n="",r=t.length,i=0;r>i;i++)e=t.charCodeAt(i),Math.random()>.5&&(e="x"+e.toString(16)),n+="&#"+e+";";return n},n.prototype.code=function(t,e,n){if(this.options.highlight){var r=this.options.highlight(t,e);null!=r&&r!==t&&(n=!0,t=r)}return e?'<pre><code class="'+this.options.langPrefix+i(e,!0)+'">'+(n?t:i(t,!0))+"\n</code></pre>\n":"<pre><code>"+(n?t:i(t,!0))+"\n</code></pre>"},n.prototype.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},n.prototype.html=function(t){return t},n.prototype.heading=function(t,e,n){return"<h"+e+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+t+"</h"+e+">\n"},n.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},n.prototype.list=function(t,e){var n=e?"ol":"ul";return"<"+n+">\n"+t+"</"+n+">\n"},n.prototype.listitem=function(t){return"<li>"+t+"</li>\n"},n.prototype.paragraph=function(t){return"<p>"+t+"</p>\n"},n.prototype.table=function(t,e){return"<table>\n<thead>\n"+t+"</thead>\n<tbody>\n"+e+"</tbody>\n</table>\n"},n.prototype.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},n.prototype.tablecell=function(t,e){var n=e.header?"th":"td",r=e.align?"<"+n+' style="text-align:'+e.align+'">':"<"+n+">";return r+t+"</"+n+">\n"},n.prototype.strong=function(t){return"<strong>"+t+"</strong>"},n.prototype.em=function(t){return"<em>"+t+"</em>"},n.prototype.codespan=function(t){return"<code>"+t+"</code>"},n.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},n.prototype.del=function(t){return"<del>"+t+"</del>"},n.prototype.link=function(t,e,n){if(this.options.sanitize){try{var r=decodeURIComponent(o(t)).replace(/[^\w:]/g,"").toLowerCase()}catch(i){return""}if(0===r.indexOf("javascript:"))return""}var s='<a href="'+t+'"';return e&&(s+=' title="'+e+'"'),s+=">"+n+"</a>"},n.prototype.image=function(t,e,n){var r='<img src="'+t+'" alt="'+n+'"';return e&&(r+=' title="'+e+'"'),r+=this.options.xhtml?"/>":">"},r.parse=function(t,e,n){var i=new r(e,n);return i.parse(t)},r.prototype.parse=function(t){this.inline=new e(t.links,this.options,this.renderer),this.tokens=t.reverse();for(var n="";this.next();)n+=this.tok();return n},r.prototype.next=function(){return this.token=this.tokens.pop()},r.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},r.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},r.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var t,e,n,r,i,o="",s="";for(n="",t=0;t<this.token.header.length;t++)r={header:!0,align:this.token.align[t]},n+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(o+=this.renderer.tablerow(n),t=0;t<this.token.cells.length;t++){for(e=this.token.cells[t],n="",i=0;i<e.length;i++)n+=this.renderer.tablecell(this.inline.output(e[i]),{header:!1,align:this.token.align[i]});s+=this.renderer.tablerow(n)}return this.renderer.table(o,s);case"blockquote_start":for(var s="";"blockquote_end"!==this.next().type;)s+=this.tok();return this.renderer.blockquote(s);case"list_start":for(var s="",a=this.token.ordered;"list_end"!==this.next().type;)s+=this.tok();return this.renderer.list(s,a);case"list_item_start":for(var s="";"list_item_end"!==this.next().type;)s+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(s);case"loose_item_start":for(var s="";"list_item_end"!==this.next().type;)s+=this.tok();return this.renderer.listitem(s);case"html":var l=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(l);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},a.exec=a,u.options=u.setOptions=function(t){return l(u.defaults,t),u},u.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new n,xhtml:!1},u.Parser=r,u.parser=r.parse,u.Renderer=n,u.Lexer=t,u.lexer=t.lex,u.InlineLexer=e,u.inlineLexer=e.output,u.parse=u,"object"==typeof exports?module.exports=u:"function"==typeof define&&define.amd?define("marked",[],function(){return u}):this.marked=u}.call(function(){return this||("undefined"!=typeof window?window:global)}()),function(){var t,e,n,r,i=[].slice;e="undefined"!=typeof module&&null!==module&&null!=module.exports,t=function(t,e,n){var r;return r=!1,function(){var o;return o=1<=arguments.length?i.call(arguments,0):[],r||"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("#"+t+" is deprecated. Use #"+e+" instead."),r=!0,n.apply(this,o)}},n=function(t){return"[object Array]"===Object.prototype.toString.call(t)},r=function(r){var o,s,a;if(null==r)throw"Can't find moment";return a=!1,o=function(){function o(t,e,n,i){var o;null==i&&(i={}),"string"!=typeof n&&(i=null!=n?n:{},n=null),"boolean"==typeof i&&(i={allDay:i}),this.start=r(t,n,i.parseStrict),this.end=r(e,n,i.parseStrict),this.allDay=null!=(o=i.allDay)?o:!1,this._trueStart=this.allDay?this.start.clone().startOf("day"):this.start,this._trueEnd=this.allDay?this.end.startOf("d").clone().add(1,"day"):this.end}return o._extend=function(){var t,e,n,r,o,s;for(e=arguments[0],r=2<=arguments.length?i.call(arguments,1):[],o=0,s=r.length;s>o;o++){n=r[o];for(t in n)"undefined"!=typeof n[t]&&(e[t]=n[t])}return e},o.defaults={twentyFourHour:!1,allDaySimple:{fn:function(t){return function(){return t.allDay}},slot:0,pre:" "},dayOfWeek:{fn:function(t){return function(e){return e.format(t.weekdayFormat)}},slot:1,pre:" "},allDayMonth:{fn:function(t){return function(e){return e.format(""+t.monthFormat+" "+t.dayFormat)}},slot:2,pre:" "},month:{fn:function(t){return function(e){return e.format(t.monthFormat)}},slot:2,pre:" "},date:{fn:function(t){return function(e){return e.format(t.dayFormat)}},slot:3,pre:" "},year:{fn:function(t){return function(e){return e.format(t.yearFormat)}},slot:4,pre:", "},time:{fn:function(t){return function(e){var n;return n=e.format(0===e.minutes()&&t.implicitMinutes&&!t.twentyFourHour?t.hourFormat:""+t.hourFormat+":"+t.minuteFormat),t.groupMeridiems||t.twentyFourHour||(t.spaceBeforeMeridiem&&(n+=" "),n+=e.format(t.meridiemFormat)),n}},slot:5,pre:", "},meridiem:{fn:function(t){return function(){return function(e){return e.format(t.meridiemFormat)}}(this)},slot:6,pre:function(t){return t.spaceBeforeMeridiem?" ":""}}},o.registerLang=function(t,e){return r.lang(t,{twix:o._extend({},o.defaults,e)})},o.prototype.isSame=function(t){return this.start.isSame(this.end,t)},o.prototype.length=function(t){return this._trueEnd.diff(this._trueStart,t)},o.prototype.count=function(t){var e,n;return n=this.start.clone().startOf(t),e=this.end.clone().startOf(t),e.diff(n,t)+1},o.prototype.countInner=function(t){var e,n,r;return r=this._inner(t),n=r[0],e=r[1],n>=e?0:e.diff(n,t)},o.prototype.iterate=function(t,e,n){var r,i,o,s;return null==t&&(t=1),s=this._prepIterateInputs(t,e,n),t=s[0],e=s[1],n=s[2],o=this._trueStart.clone().startOf(e),r=this._trueEnd.clone().startOf(e),i=function(t){return function(){return!t.allDay&&r>=o&&(!n||!o.isSame(r)||t.end.hours()>n)||t.allDay&&r>o}}(this),this._iterateHelper(e,o,i,t)},o.prototype.iterateInner=function(t,e){var n,r,i,o,s;return null==t&&(t=1),o=this._prepIterateInputs(t,e),t=o[0],e=o[1],s=this._inner(e,t),i=s[0],n=s[1],r=function(){return n>i},this._iterateHelper(e,i,r,t)},o.prototype.humanizeLength=function(){return this.allDay?this.isSame("day")?"all day":this.start.from(this.end.clone().add(1,"day"),!0):this.start.from(this.end,!0)},o.prototype.asDuration=function(){var t;return t=this.end.diff(this.start),r.duration(t)},o.prototype.isPast=function(){return this.allDay?this.end.clone().endOf("day")<r():this.end<r()},o.prototype.isFuture=function(){return this.allDay?this.start.clone().startOf("day")>r():this.start>r()},o.prototype.isCurrent=function(){return!this.isPast()&&!this.isFuture()},o.prototype.contains=function(t){return r.isMoment(t)||(t=r(t)),this._trueStart<=t&&this._trueEnd>=t},o.prototype.isEmpty=function(){return this._trueStart.isSame(this._trueEnd)},o.prototype.overlaps=function(t){return this._trueEnd.isAfter(t._trueStart)&&this._trueStart.isBefore(t._trueEnd)},o.prototype.engulfs=function(t){return this._trueStart<=t._trueStart&&this._trueEnd>=t._trueEnd},o.prototype.union=function(t){var e,n,r;return e=this.allDay&&t.allDay,e?(r=this.start<t.start?this.start:t.start,n=this.end>t.end?this.end:t.end):(r=this._trueStart<t._trueStart?this._trueStart:t._trueStart,n=this._trueEnd>t._trueEnd?this._trueEnd:t._trueEnd),new o(r,n,e)},o.prototype.intersection=function(t){var e,n,r;return e=this.allDay&&t.allDay,e?(r=this.start>t.start?this.start:t.start,n=this.end<t.end?this.end:t.end):(r=this._trueStart>t._trueStart?this._trueStart:t._trueStart,n=this._trueEnd<t._trueEnd?this._trueEnd:t._trueEnd),new o(r,n,e)},o.prototype.xor=function(){var t,e,n,r,s,a,l,u,p,h,c,f,d,g,m,y,b,k;for(h=1<=arguments.length?i.call(arguments,0):[],u=0,f=null,c=[],t=function(){var t,e,n;for(n=[],t=0,e=h.length;e>t;t++)l=h[t],l.allDay&&n.push(l);return n}().length===h.length,e=[],k=[this].concat(h),r=g=0,y=k.length;y>g;r=++g)s=k[r],e.push({time:s._trueStart,i:r,type:0}),e.push({time:s._trueEnd,i:r,type:1});for(e=e.sort(function(t,e){return t.time-e.time}),m=0,b=e.length;b>m;m++)p=e[m],1===p.type&&(u-=1),u===p.type&&(f=p.time),u===(p.type+1)%2&&(f&&(a=c[c.length-1],a&&a.end.isSame(f)?a.end=p.time:(n=t?p.time.subtract(1,"d"):p.time,d=new o(f,n,t),d.isEmpty()||c.push(d))),f=null),0===p.type&&(u+=1);return c},o.prototype.difference=function(){var t,e,n,r,o,s;for(t=1<=arguments.length?i.call(arguments,0):[],o=this.xor.apply(this,t).map(function(t){return function(e){return t.intersection(e)}}(this)),s=[],n=0,r=o.length;r>n;n++)e=o[n],!e.isEmpty()&&e.isValid()&&s.push(e);return s},o.prototype.split=function(){var t,e,o,s,a,l,u,p,h,c;if(t=1<=arguments.length?i.call(arguments,0):[],o=u=this._trueStart.clone(),r.isDuration(t[0])?e=t[0]:!r.isMoment(t[0])&&!n(t[0])&&"object"==typeof t[0]||"number"==typeof t[0]&&"string"==typeof t[1]?e=r.duration(t[0],t[1]):h=n(t[0])?t[0]:t,h&&(h=function(){var t,e,n;for(n=[],t=0,e=h.length;e>t;t++)p=h[t],n.push(r(p));return n}(),h=function(){var t,e,n;for(n=[],t=0,e=h.length;e>t;t++)l=h[t],l.isValid()&&l>=u&&n.push(l);return n}().sort()),e&&0===e.asMilliseconds()||h&&0===h.length)return[this];for(c=[],a=0,s=this._trueEnd;s>u&&(null==h||h[a]);)o=e?u.clone().add(e):h[a].clone(),o=r.min(s,o),u.isSame(o)||c.push(r.twix(u,o)),u=o,a+=1;return!o.isSame(this._trueEnd)&&h&&c.push(r.twix(o,this._trueEnd)),c},o.prototype.isValid=function(){return this._trueStart<=this._trueEnd},o.prototype.equals=function(t){return t instanceof o&&this.allDay===t.allDay&&this.start.valueOf()===t.start.valueOf()&&this.end.valueOf()===t.end.valueOf()},o.prototype.toString=function(){var t;return"{start: "+this.start.format()+", end: "+this.end.format()+", allDay: "+(null!=(t=this.allDay)?t:{"true":"false"})+"}"},o.prototype.simpleFormat=function(t,e){var n,r;return n={allDay:"(all day)",template:o.formatTemplate},o._extend(n,e||{}),r=n.template(this.start.format(t),this.end.format(t)),this.allDay&&n.allDay&&(r+=" "+n.allDay),r},o.prototype.format=function(t){var e,n,i,s,a,l,u,p,h,c,f,d,g,m;if(this._lazyLang(),this.isEmpty())return"";for(h={groupMeridiems:!0,spaceBeforeMeridiem:!0,showDate:!0,showDayOfWeek:!1,twentyFourHour:this.langData.twentyFourHour,implicitMinutes:!0,implicitYear:!0,yearFormat:"YYYY",monthFormat:"MMM",weekdayFormat:"ddd",dayFormat:"D",meridiemFormat:"A",hourFormat:"h",minuteFormat:"mm",allDay:"all day",explicitAllDay:!1,lastNightEndsAt:0,template:o.formatTemplate},o._extend(h,t||{}),a=[],h.twentyFourHour&&(h.hourFormat=h.hourFormat.replace("h","H")),u=h.lastNightEndsAt>0&&!this.allDay&&this.end.clone().startOf("day").valueOf()===this.start.clone().add(1,"day").startOf("day").valueOf()&&this.start.hours()>12&&this.end.hours()<h.lastNightEndsAt,p=h.showDate||!this.isSame("day")&&!u,this.allDay&&this.isSame("day")&&(!h.showDate||h.explicitAllDay)&&a.push({name:"all day simple",fn:this._formatFn("allDaySimple",h),pre:this._formatPre("allDaySimple",h),slot:this._formatSlot("allDaySimple")}),!p||h.implicitYear&&this.start.year()===r().year()&&this.isSame("year")||a.push({name:"year",fn:this._formatFn("year",h),pre:this._formatPre("year",h),slot:this._formatSlot("year")}),!this.allDay&&p&&a.push({name:"all day month",fn:this._formatFn("allDayMonth",h),ignoreEnd:function(){return u},pre:this._formatPre("allDayMonth",h),slot:this._formatSlot("allDayMonth")}),this.allDay&&p&&a.push({name:"month",fn:this._formatFn("month",h),pre:this._formatPre("month",h),slot:this._formatSlot("month")}),this.allDay&&p&&a.push({name:"date",fn:this._formatFn("date",h),pre:this._formatPre("date",h),slot:this._formatSlot("date")}),p&&h.showDayOfWeek&&a.push({name:"day of week",fn:this._formatFn("dayOfWeek",h),pre:this._formatPre("dayOfWeek",h),slot:this._formatSlot("dayOfWeek")}),!h.groupMeridiems||h.twentyFourHour||this.allDay||a.push({name:"meridiem",fn:this._formatFn("meridiem",h),pre:this._formatPre("meridiem",h),slot:this._formatSlot("meridiem")}),this.allDay||a.push({name:"time",fn:this._formatFn("time",h),pre:this._formatPre("time",h),slot:this._formatSlot("time")}),f=[],n=[],e=[],d=!0,c=function(t){return function(r){var o,s,a;return a=r.fn(t.start),o=r.ignoreEnd&&r.ignoreEnd()?a:r.fn(t.end),s={format:r,value:function(){return a}},o===a&&d?e.push(s):(d&&(d=!1,e.push({format:{slot:r.slot,pre:""},value:function(){return h.template(i(f),i(n,!0).trim())}})),f.push(s),n.push({format:r,value:function(){return o}}))}}(this),g=0,m=a.length;m>g;g++)s=a[g],c(s);return l=!0,(i=function(){return function(t,e){var n,r,i,o,s,a;for(n=!0,i="",a=t.sort(function(t,e){return t.format.slot-e.format.slot}),o=0,s=a.length;s>o;o++)r=a[o],l||(i+=n&&e?" ":r.format.pre),i+=r.value(),l=!1,n=!1;return i}}(this))(e)},o.prototype._iterateHelper=function(t,e,n,r){return null==r&&(r=1),{next:function(){return function(){var i;return n()?(i=e.clone(),e.add(r,t),i):null}}(this),hasNext:n}},o.prototype._prepIterateInputs=function(){var t,e,n,o,s,a;return t=1<=arguments.length?i.call(arguments,0):[],"number"==typeof t[0]?t:("string"==typeof t[0]&&(o=t.shift(),e=null!=(s=t.pop())?s:1,t.length&&(n=null!=(a=t[0])?a:!1)),r.isDuration(t[0])&&(o="ms",e=t[0].as(o)),[e,o,n])},o.prototype._inner=function(t,e){var n,r,i,o,s;return null==t&&(t="ms"),null==e&&(e=1),s=this._trueStart.clone(),i=this._trueEnd.clone(),s>s.clone().startOf(t)&&s.startOf(t).add(e,t),i<i.clone().endOf(t)&&i.startOf(t),r=s.twix(i).asDuration(t),n=r.get(t),o=n%e,i.subtract(o,t),[s,i]},o.prototype._lazyLang=function(){var t,n,i,s;if(n=this.start.lang(),null!=n&&this.end.lang()._abbr!==n._abbr&&this.end.lang(n._abbr),null==this.langData||this.langData._abbr!==n._abbr){if(e&&!a&&"en"!==n._abbr){try{i=require("./lang"),i(r,o)}catch(l){t=l}a=!0}return this.langData=null!=(s=null!=n?n._twix:void 0)?s:o.defaults}},o.prototype._formatFn=function(t,e){return this.langData[t].fn(e)},o.prototype._formatSlot=function(t){return this.langData[t].slot},o.prototype._formatPre=function(t,e){return"function"==typeof this.langData[t].pre?this.langData[t].pre(e):this.langData[t].pre},o.prototype.sameDay=t("sameDay","isSame('day')",function(){return this.isSame("day")}),o.prototype.sameYear=t("sameYear","isSame('year')",function(){return this.isSame("year")}),o.prototype.countDays=t("countDays","countOuter('days')",function(){return this.countOuter("days")}),o.prototype.daysIn=t("daysIn","iterate('days' [,minHours])",function(t){return this.iterate("days",t)}),o.prototype.past=t("past","isPast()",function(){return this.isPast()}),o.prototype.duration=t("duration","humanizeLength()",function(){return this.humanizeLength()}),o.prototype.merge=t("merge","union(other)",function(t){return this.union(t)}),o}(),s=function(t){return"function"==typeof Object.getPrototypeOf?Object.getPrototypeOf(t):"".__proto__===String.prototype?t.__proto__:t.constructor.prototype},o._extend(r._locale||s(r.fn._lang),{_twix:o.defaults}),o.formatTemplate=function(t,e){return""+t+" - "+e},r.twix=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(o,arguments,function(){})},r.fn.twix=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(o,[this].concat(i.call(arguments)),function(){})},r.fn.forDuration=function(t,e){return new o(this,this.clone().add(t),e)},r.duration.fn.afterMoment=function(t,e){return new o(t,r(t).clone().add(this),e)},r.duration.fn.beforeMoment=function(t,e){return new o(r(t).clone().subtract(this),t,e)},r.twixClass=o,o},e&&(module.exports=r(require("moment"))),"function"==typeof define&&define("twix",["moment"],function(t){return r(t)}),null!=this.moment&&(this.Twix=r(this.moment))}.call(this),function(t,e,n,r){t.fn.popup=function(i){var o,s=t(this),a=t(n),l=s.selector||"",u=(new Date).getTime(),p=[],h=arguments[0],c="string"==typeof h,f=[].slice.call(arguments,1);return s.each(function(){var n,s=t.isPlainObject(i)?t.extend(!0,{},t.fn.popup.settings,i):t.extend({},t.fn.popup.settings),d=s.selector,g=s.className,m=s.error,y=s.metadata,b=s.namespace,k="."+s.namespace,v="module-"+b,_=t(this),x=t(s.context),w=s.target?t(s.target):_,S=t(e),D=s.inline?w.offsetParent():S,E=s.inline?w.next(s.selector.popup):S.children(s.selector.popup).last(),O=0,P=this,A=_.data(v);n={initialize:function(){n.debug("Initializing module",_),"click"==s.on?_.on("click",n.toggle):_.on(n.get.startEvent()+k,n.event.start).on(n.get.endEvent()+k,n.event.end),s.target&&n.debug("Target set to element",w),S.on("resize"+k,n.event.resize),n.instantiate()},instantiate:function(){n.verbose("Storing instance of module",n),A=n,_.data(v,A)},refresh:function(){s.inline?(E=w.next(d.popup),D=w.offsetParent()):E=S.children(d.popup).last()},destroy:function(){n.debug("Destroying previous module"),S.off(k),E.remove(),_.off(k).removeData(v)},event:{start:function(){n.timer=setTimeout(function(){n.is.hidden()&&n.show()},s.delay)},end:function(){clearTimeout(n.timer),n.is.visible()&&n.hide()},resize:function(){n.is.visible()&&n.set.position()}},create:function(){n.debug("Creating pop-up html");var e=_.data(y.html)||s.html,r=_.data(y.variation)||s.variation,i=_.data(y.title)||s.title,o=_.data(y.content)||_.attr("title")||s.content;e||o||i?(e||(e=s.template({title:i,content:o})),E=t("<div/>").addClass(g.popup).addClass(r).html(e),s.inline?(n.verbose("Inserting popup element inline",E),E.data(v,A).insertAfter(_)):(n.verbose("Appending popup element to body",E),E.data(v,A).appendTo(x)),t.proxy(s.onCreate,E)()):n.error(m.content)},toggle:function(){n.debug("Toggling pop-up"),n.is.hidden()?(n.debug("Popup is hidden, showing pop-up"),n.unbind.close(),n.hideAll(),n.show()):(n.debug("Popup is visible, hiding pop-up"),n.hide())},show:function(t){t=t||function(){},n.debug("Showing pop-up",s.transition),s.preserve||n.refresh(),n.exists()||n.create(),n.save.conditions(),n.set.position(),n.animate.show(t)},hide:function(t){t=t||function(){},_.removeClass(g.visible),n.restore.conditions(),n.unbind.close(),n.is.visible()&&n.animate.hide(t)},hideAll:function(){t(d.popup).filter(":visible").popup("hide")
},hideGracefully:function(e){e&&0===t(e.target).closest(d.popup).size()?(n.debug("Click occurred outside popup hiding popup"),n.hide()):n.debug("Click was inside popup, keeping popup open")},exists:function(){return s.inline?0!==E.size():E.parent(x).size()},remove:function(){n.debug("Removing popup"),E.remove(),t.proxy(s.onRemove,E)()},save:{conditions:function(){n.cache={title:_.attr("title")},n.cache.title&&_.removeAttr("title"),n.verbose("Saving original attributes",n.cache.title)}},restore:{conditions:function(){return n.cache&&n.cache.title&&(_.attr("title",n.cache.title),n.verbose("Restoring original attributes",n.cache.title)),!0}},animate:{show:function(e){e=e||function(){},_.addClass(g.visible),s.transition&&t.fn.transition!==r&&_.transition("is supported")?E.transition(s.transition+" in",s.duration,function(){n.bind.close(),t.proxy(e,P)()}):E.stop().fadeIn(s.duration,s.easing,function(){n.bind.close(),t.proxy(e,P)()}),t.proxy(s.onShow,P)()},hide:function(e){e=e||function(){},n.debug("Hiding pop-up"),s.transition&&t.fn.transition!==r&&_.transition("is supported")?E.transition(s.transition+" out",s.duration,function(){n.reset(),e()}):E.stop().fadeOut(s.duration,s.easing,function(){n.reset(),e()}),t.proxy(s.onHide,P)()}},get:{startEvent:function(){return"hover"==s.on?"mouseenter":"focus"==s.on?"focus":void 0},endEvent:function(){return"hover"==s.on?"mouseleave":"focus"==s.on?"blur":void 0},offstagePosition:function(){var r={top:t(e).scrollTop(),bottom:t(e).scrollTop()+t(e).height(),left:0,right:t(e).width()},i={width:E.width(),height:E.outerHeight(),position:E.offset()},o={},s=[];return i.position&&(o={top:i.position.top<r.top,bottom:i.position.top+i.height>r.bottom,right:i.position.left+i.width>r.right,left:i.position.left<r.left}),n.verbose("Checking if outside viewable area",i.position),t.each(o,function(t,e){e&&s.push(t)}),s.length>0?s.join(" "):!1},nextPosition:function(t){switch(t){case"top left":t="bottom left";break;case"bottom left":t="top right";break;case"top right":t="bottom right";break;case"bottom right":t="top center";break;case"top center":t="bottom center";break;case"bottom center":t="right center";break;case"right center":t="left center";break;case"left center":t="top center"}return t}},set:{position:function(r,i){var o,a,l=(t(e).width(),t(e).height(),w.outerWidth()),u=w.outerHeight(),p=E.width(),h=E.outerHeight(),c=D.outerWidth(),f=D.outerHeight(),d=s.distanceAway,b=s.inline?w.position():w.offset();switch(r=r||_.data(y.position)||s.position,i=i||_.data(y.offset)||s.offset,s.inline&&("left center"==r||"right center"==r?(i+=parseInt(e.getComputedStyle(P).getPropertyValue("margin-top"),10),d+=-parseInt(e.getComputedStyle(P).getPropertyValue("margin-left"),10)):(i+=parseInt(e.getComputedStyle(P).getPropertyValue("margin-left"),10),d+=parseInt(e.getComputedStyle(P).getPropertyValue("margin-top"),10))),n.debug("Calculating offset for position",r),r){case"top left":o={bottom:f-b.top+d,right:c-b.left-i,top:"auto",left:"auto"};break;case"top center":o={bottom:f-b.top+d,left:b.left+l/2-p/2+i,top:"auto",right:"auto"};break;case"top right":o={top:"auto",bottom:f-b.top+d,left:b.left+l+i,right:"auto"};break;case"left center":o={top:b.top+u/2-h/2+i,right:c-b.left+d,left:"auto",bottom:"auto"};break;case"right center":o={top:b.top+u/2-h/2+i,left:b.left+l+d,bottom:"auto",right:"auto"};break;case"bottom left":o={top:b.top+u+d,right:c-b.left-i,left:"auto",bottom:"auto"};break;case"bottom center":o={top:b.top+u+d,left:b.left+l/2-p/2+i,bottom:"auto",right:"auto"};break;case"bottom right":o={top:b.top+u+d,left:b.left+l+i,bottom:"auto",right:"auto"}}return E.css(o).removeClass(g.position).addClass(r).addClass(g.loading),a=n.get.offstagePosition(),a?(n.debug("Element is outside boundaries",a),O<s.maxSearchDepth?(r=n.get.nextPosition(r),O++,n.debug("Trying new position",r),n.set.position(r)):(n.error(m.recursion),O=0,n.reset(),E.removeClass(g.loading),!1)):(n.debug("Position is on stage",r),O=0,E.removeClass(g.loading),!0)}},bind:{close:function(){"click"==s.on&&s.closable&&(n.verbose("Binding popup close event to document"),a.on("click"+k,function(e){n.verbose("Pop-up clickaway intent detected"),t.proxy(n.hideGracefully,this)(e)}))}},unbind:{close:function(){"click"==s.on&&s.closable&&(n.verbose("Removing close event from document"),a.off("click"+k))}},is:{animating:function(){return E.is(":animated")||E.hasClass(g.animating)},visible:function(){return E.is(":visible")},hidden:function(){return!n.is.visible()}},reset:function(){E.attr("style","").removeAttr("style"),s.preserve||n.remove()},setting:function(e,n){if(t.isPlainObject(e))t.extend(!0,s,e);else{if(n===r)return s[e];s[e]=n}},internal:function(e,i){if(t.isPlainObject(e))t.extend(!0,n,e);else{if(i===r)return n[e];n[e]=i}},debug:function(){s.debug&&(s.performance?n.performance.log(arguments):(n.debug=Function.prototype.bind.call(console.info,console,s.name+":"),n.debug.apply(console,arguments)))},verbose:function(){s.verbose&&s.debug&&(s.performance?n.performance.log(arguments):(n.verbose=Function.prototype.bind.call(console.info,console,s.name+":"),n.verbose.apply(console,arguments)))},error:function(){n.error=Function.prototype.bind.call(console.error,console,s.name+":"),n.error.apply(console,arguments)},performance:{log:function(t){var e,r,i;s.performance&&(e=(new Date).getTime(),i=u||e,r=e-i,u=e,p.push({Element:P,Name:t[0],Arguments:[].slice.call(t,1)||"","Execution Time":r})),clearTimeout(n.performance.timer),n.performance.timer=setTimeout(n.performance.display,100)},display:function(){var e=s.name+":",i=0;u=!1,clearTimeout(n.performance.timer),t.each(p,function(t,e){i+=e["Execution Time"]}),e+=" "+i+"ms",l&&(e+=" '"+l+"'"),(console.group!==r||console.table!==r)&&p.length>0&&(console.groupCollapsed(e),console.table?console.table(p):t.each(p,function(t,e){console.log(e.Name+": "+e["Execution Time"]+"ms")}),console.groupEnd()),p=[]}},invoke:function(e,n,i){var s,a,l,u=A;return n=n||f,i=P||i,"string"==typeof e&&u!==r&&(e=e.split(/[\. ]/),s=e.length-1,t.each(e,function(n,i){var o=n!=s?i+e[n+1].charAt(0).toUpperCase()+e[n+1].slice(1):e;if(t.isPlainObject(u[o])&&n!=s)u=u[o];else{if(u[o]!==r)return a=u[o],!1;if(!t.isPlainObject(u[i])||n==s)return u[i]!==r?(a=u[i],!1):!1;u=u[i]}})),t.isFunction(a)?l=a.apply(i,n):a!==r&&(l=a),t.isArray(o)?o.push(l):o!==r?o=[o,l]:l!==r&&(o=l),a}},c?(A===r&&n.initialize(),n.invoke(h)):(A!==r&&n.destroy(),n.initialize())}),o!==r?o:this},t.fn.popup.settings={name:"Popup",debug:!1,verbose:!0,performance:!0,namespace:"popup",onCreate:function(){},onRemove:function(){},onShow:function(){},onHide:function(){},variation:"",content:!1,html:!1,title:!1,on:"hover",target:!1,closable:!0,context:"body",position:"top center",delay:150,inline:!1,preserve:!1,duration:250,easing:"easeOutQuad",transition:"scale",distanceAway:0,offset:0,maxSearchDepth:10,error:{content:"Your popup has no content specified",method:"The method you called is not defined.",recursion:"Popup attempted to reposition element to fit, but could not find an adequate position."},metadata:{content:"content",html:"html",offset:"offset",position:"position",title:"title",variation:"variation"},className:{animating:"animating",loading:"loading",popup:"ui popup",position:"top left center bottom right",visible:"visible"},selector:{popup:".ui.popup"},template:function(t){var e="";return typeof t!==r&&(typeof t.title!==r&&t.title&&(e+='<div class="header">'+t.title+"</div>"),typeof t.content!==r&&t.content&&(e+='<div class="content">'+t.content+"</div>")),e}},t.extend(t.easing,{easeOutQuad:function(t,e,n,r,i){return-r*(e/=i)*(e-2)+n}})}(jQuery,window,document),define("semantic-popup",function(){}),define("components/annotation-list/bindings",["require","knockout","semantic-popup"],function(t){var e=t("knockout");t("semantic-popup"),e.bindingHandlers.popup={init:function(t,e){$(t).popup({content:e(),delay:{show:0},duration:0})}}}),define("components/annotation-list/annotation-list",["require","knockout","text!./annotation-list.html","annotationsApi","marked","moment","twix","./bindings"],function(t){function e(t){this.metric=t.metric,this.rawAnnotations=n.observable([]),this.getRawAnnotations=n.computed(function(){var t=n.unwrap(this.metric);t?i.get(t,this.rawAnnotations):this.rawAnnotations([])},this),this.sortAnnotations=function(t,e){return t=t.start,e=e.start,!t&&e||t&&e&&e>t?-1:t&&!e||t&&e&&t>e?1:0},this.formatDateRange=function(t,e){if(!t||!e){var n=function(t,e){return t?s(t).format("MMM DD, YYYY"):e},r=n(t,"Beginning of time"),i=n(e,"Now");return r+" - "+i}return s(t).twix(e,{allDay:!0}).format()},this.annotations=n.computed(function(){var t=this;return this.rawAnnotations().sort(this.sortAnnotations).map(function(e){return{dateRange:t.formatDateRange(e.start,e.end),htmlNote:o(e.note,{sanitize:!0})}})},this)}var n=t("knockout"),r=t("text!./annotation-list.html"),i=t("annotationsApi"),o=t("marked"),s=t("moment");return t("twix"),t("./bindings"),{viewModel:e,template:r}});